import{i as d,f as r,o as a,F as E,l as L,a as e,t as u,n as k,d as R,c as T,w as V,h as c,g as q,j as B,S as A,s as K,b as w,E as Q,k as j}from"./app-Bwvq5oqN.js";import{_ as G,a as J}from"./AppSidebar-7aai3cFF.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"flex space-x-3 mb-6 overflow-x-auto scrollbar-hide"},Z=["onClick"],ee={__name:"CategoryTabs",props:{initialCategory:{type:String,default:"all"}},emits:["category-changed"],setup(o,{emit:g}){const f=o,m=g,i=d(f.initialCategory),x=[{id:"all",name:"すべて"},{id:"music",name:"音楽"},{id:"news",name:"ニュース"},{id:"mix",name:"ミックス"},{id:"live",name:"ライブ"},{id:"podcast",name:"ポッドキャスト"},{id:"pets",name:"ペット"},{id:"soccer",name:"サッカー"},{id:"animation",name:"アニメーション"},{id:"recent",name:"最近アップロードされた動画"},{id:"watched",name:"視聴済み"}],b=y=>{i.value=y,m("category-changed",y)};return(y,h)=>(a(),r("div",X,[(a(),r(E,null,L(x,s=>e("button",{key:s.id,onClick:t=>b(s.id),class:k(["px-4 py-2 rounded-full text-sm whitespace-nowrap transition-all duration-200 font-medium",i.value===s.id?"bg-black text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"])},u(s.name),11,Z)),64))]))}},te=D(ee,[["__scopeId","data-v-72c771ab"]]),oe={class:"w-full h-44 bg-gray-900 flex items-center justify-center"},se=["src","preload","crossorigin","poster"],le={key:0,class:"absolute inset-0 bg-gray-900 flex items-center justify-center"},ae={key:1,class:"absolute inset-0 bg-gray-800 flex flex-col items-center justify-center text-gray-300"},ie={class:"text-xs"},re=["src","alt"],ne={key:0,class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},de={key:1,class:"absolute top-2 left-2 bg-red-600 text-white text-xs px-2 py-1 rounded font-medium flex items-center space-x-1"},ue={class:"absolute bottom-2 right-2 bg-black bg-opacity-80 text-white text-xs px-2 py-1 rounded font-medium"},ce={key:2,class:"absolute top-2 right-2 bg-black bg-opacity-80 text-white text-xs px-2 py-1 rounded font-medium"},ve={class:"flex mt-3 space-x-3"},fe=["src","alt"],ge={key:1,class:"w-full h-full rounded-full flex items-center justify-center text-white text-sm font-medium"},me={class:"flex-1 min-w-0"},he={class:"font-medium text-sm line-clamp-2 text-gray-900 group-hover:text-blue-600 transition-colors leading-5 mb-1"},xe={class:"text-gray-600 text-xs hover:text-gray-800 transition-colors"},ye={class:"text-gray-600 text-xs mt-1"},be={class:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity"},pe={__name:"VideoCard",props:{video:{type:Object,required:!0}},setup(o){const g=o,f=d(!1),m=d(!1),i=d(!1),x=d(!1),b=d(!1),y=d(!1),h=d(!0),s=d(null),t=d("動画を読み込めません"),v=d(!1),p=R(()=>g.video.video_url&&(g.video.video_url.startsWith("http://")||g.video.video_url.startsWith("https://"))),I=R(()=>p.value&&!v.value?`/video-proxy?url=${encodeURIComponent(g.video.video_url)}`:g.video.video_url);let _=null;const N=()=>{h.value=!0,i.value=!1},U=async()=>{x.value=!0,_=setTimeout(async()=>{if(x.value&&y.value&&s.value&&!i.value)try{await s.value.play(),b.value=!0}catch(n){console.log("動画再生エラー:",n)}},500)},H=()=>{x.value=!1,b.value=!1,_&&(clearTimeout(_),_=null),s.value&&!i.value&&(s.value.pause(),s.value.currentTime=0)},O=()=>{m.value=!0,i.value=!1,h.value=!1},P=async n=>{if(console.error("動画読み込みエラー:",n),console.log("動画URL:",I.value),console.log("外部URL:",p.value),console.log("動画データ:",g.video),p.value&&!v.value){console.log("プロキシでの読み込みに失敗。直接URLを試行します..."),v.value=!0,await K(),s.value&&s.value.load();return}if(i.value=!0,m.value=!1,y.value=!1,h.value=!1,n&&n.target&&n.target.error){const l=n.target.error;switch(console.error("動画読み込みエラー詳細:",l),console.error("エラーコード:",l.code),console.error("エラーメッセージ:",l.message),l.code){case l.MEDIA_ERR_ABORTED:t.value="動画の読み込みが中断されました";break;case l.MEDIA_ERR_NETWORK:t.value="ネットワークエラー";break;case l.MEDIA_ERR_DECODE:t.value="動画形式がサポートされていません";break;case l.MEDIA_ERR_SRC_NOT_SUPPORTED:t.value=p.value?"外部動画にアクセスできません":"ローカル動画にアクセスできません";break;default:t.value="動画を読み込めません"}}else t.value=p.value?"外部動画にアクセスできません":"ローカル動画にアクセスできません"},Y=()=>{y.value=!0,h.value=!1},F=n=>n>=1e4?`${(n/1e4).toFixed(1)}万`:n.toLocaleString(),W=n=>{const l=new Date,S=new Date(n),C=Math.floor((l-S)/(1e3*60*60));if(C<24)return`${C} 時間前`;const $=Math.floor(C/24);if($<30)return`${$} 日前`;const M=Math.floor($/30);return M<12?`${M} か月前`:`${Math.floor(M/12)} 年前`};return(n,l)=>(a(),T(B(A),{href:`/watch/${o.video.id}`,class:"cursor-pointer group block"},{default:V(()=>[e("div",{class:"relative overflow-hidden rounded-xl",onMouseenter:U,onMouseleave:H},[e("div",oe,[e("video",{ref_key:"videoRef",ref:s,src:I.value,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",muted:"",loop:"",preload:p.value?"metadata":"auto",crossorigin:p.value?"anonymous":null,poster:o.video.thumbnail,onLoadeddata:O,onError:P,onCanplay:Y,onLoadstart:N}," お使いのブラウザは動画の再生をサポートしていません。 ",40,se),h.value&&!i.value?(a(),r("div",le,l[1]||(l[1]=[e("svg",{class:"w-8 h-8 text-white animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):c("",!0),i.value?(a(),r("div",ae,[l[2]||(l[2]=e("svg",{class:"w-12 h-12 mb-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1)),e("span",ie,u(t.value),1)])):c("",!0),i.value&&o.video.thumbnail?(a(),r("img",{key:2,src:o.video.thumbnail,alt:o.video.title,class:"absolute inset-0 w-full h-full object-cover"},null,8,re)):c("",!0)]),!x.value||i.value?(a(),r("div",ne,l[3]||(l[3]=[e("div",{class:"bg-black bg-opacity-70 rounded-full p-4"},[e("svg",{class:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8 5v14l11-7z"})])],-1)]))):c("",!0),b.value&&x.value?(a(),r("div",de,l[4]||(l[4]=[e("div",{class:"w-2 h-2 bg-white rounded-full animate-pulse"},null,-1),e("span",null,"プレビュー",-1)]))):c("",!0),e("div",ue,u(o.video.duration),1),o.video.channelBadge?(a(),r("div",ce,u(o.video.channelBadge),1)):c("",!0),o.video.specialBadge?(a(),r("div",{key:3,class:k(["absolute top-2 right-2 text-white text-xs px-2 py-1 rounded font-medium",o.video.specialBadgeColor||"bg-red-600"])},u(o.video.specialBadge),3)):c("",!0),l[5]||(l[5]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))],32),e("div",ve,[e("div",{class:k(["w-9 h-9 rounded-full flex-shrink-0",o.video.channelColor||"bg-gray-400"])},[o.video.channelAvatar?(a(),r("img",{key:0,src:o.video.channelAvatar,alt:o.video.channelName,class:"w-full h-full rounded-full object-cover"},null,8,fe)):(a(),r("div",ge,u(o.video.channelInitial),1))],2),e("div",me,[e("h3",he,u(o.video.title),1),e("p",xe,u(o.video.channelName),1),e("p",ye,u(F(o.video.views))+" 回視聴 • "+u(W(o.video.publishedAt)),1)]),e("div",be,[e("button",{class:"p-1 rounded-full hover:bg-gray-100",onClick:l[0]||(l[0]=q(S=>f.value=!f.value,["prevent","stop"]))},l[6]||(l[6]=[e("svg",{class:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})],-1)]))])])]),_:1},8,["href"]))}},z=D(pe,[["__scopeId","data-v-abc9057b"]]),we={class:"min-h-screen bg-gray-50"},_e={class:"flex"},ke={class:"p-6"},Ce={key:0,class:"mb-6"},$e={class:"text-2xl font-semibold text-gray-900"},Me={key:1,class:"mb-6"},Ee={class:"text-xl font-semibold text-gray-900"},Le={class:"text-gray-600 mt-1"},Re={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4"},Te={key:2,class:"text-center py-12"},Ve={class:"mt-1 text-sm text-gray-500"},Be={key:3,class:"mt-12"},Ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},De={key:4,class:"mt-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-8 text-white"},Ie={class:"max-w-2xl mx-auto text-center"},Se={class:"flex flex-col sm:flex-row gap-4 justify-center"},je={__name:"YouTube",props:{videos:{type:Array,default:()=>[]},newsVideos:{type:Array,default:()=>[]}},setup(o){const g=o,f=d(!1),m=d("all"),i=d(""),x=()=>{f.value=!f.value},b=s=>{m.value=s,i.value=""},y=s=>{i.value=s,m.value="all"},h=R(()=>{let s=g.videos;if(i.value){const t=i.value.toLowerCase();s=s.filter(v=>v.title.toLowerCase().includes(t)||v.channelName.toLowerCase().includes(t))}return m.value!=="all"&&!i.value&&(s=s.filter(t=>t.category===m.value)),s});return(s,t)=>(a(),r("div",we,[w(G,{onToggleSidebar:x,onSearch:y}),e("div",_e,[f.value?c("",!0):(a(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:t[0]||(t[0]=v=>f.value=!0)})),w(J,{isCollapsed:f.value},null,8,["isCollapsed"]),e("main",{class:k(["flex-1 transition-all duration-300",f.value?"ml-20":"ml-80"]),style:Q({marginLeft:f.value?"80px":"320px"})},[c("",!0),e("div",ke,[s.$page.props.auth.user?(a(),r("div",Ce,[e("h1",$e," こんにちは、"+u(s.$page.props.auth.user.name)+"さん ",1),t[1]||(t[1]=e("p",{class:"text-gray-600 mt-1"},"おすすめの動画をお楽しみください",-1))])):c("",!0),i.value?(a(),r("div",Me,[e("h2",Ee," 「"+u(i.value)+"」の検索結果 ",1),e("p",Le,u(h.value.length)+"件の動画が見つかりました",1)])):c("",!0),w(te,{onCategoryChanged:b}),e("div",Re,[(a(!0),r(E,null,L(h.value,v=>(a(),T(z,{key:v.id,video:v},null,8,["video"]))),128))]),h.value.length===0?(a(),r("div",Te,[t[2]||(t[2]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)),t[3]||(t[3]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"動画が見つかりません",-1)),e("p",Ve,u(i.value?"検索条件を変更してお試しください":"選択されたカテゴリに動画がありません"),1)])):c("",!0),!i.value&&m.value==="all"&&o.newsVideos.length>0?(a(),r("div",Be,[t[4]||(t[4]=e("h2",{class:"text-xl font-semibold mb-6 text-gray-900"},"トップニュース",-1)),e("div",Ae,[(a(!0),r(E,null,L(o.newsVideos,v=>(a(),T(z,{key:v.id,video:v},null,8,["video"]))),128))])])):c("",!0),s.$page.props.auth.user?c("",!0):(a(),r("div",De,[e("div",Ie,[t[7]||(t[7]=e("h3",{class:"text-2xl font-bold mb-4"},"YouTubeをもっと楽しもう",-1)),t[8]||(t[8]=e("p",{class:"text-lg mb-6 opacity-90"}," アカウントを作成して、お気に入りの動画を保存したり、コメントを投稿したりしましょう ",-1)),e("div",Se,[w(B(A),{href:"/register",class:"px-6 py-3 bg-white text-blue-600 font-semibold rounded-lg hover:bg-gray-100 transition-colors"},{default:V(()=>t[5]||(t[5]=[j(" 無料でアカウント作成 ")])),_:1,__:[5]}),w(B(A),{href:"/login",class:"px-6 py-3 border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-blue-600 transition-colors"},{default:V(()=>t[6]||(t[6]=[j(" ログイン ")])),_:1,__:[6]})])])]))])],6)])]))}},Oe=D(je,[["__scopeId","data-v-236bf2ec"]]);export{Oe as default};
