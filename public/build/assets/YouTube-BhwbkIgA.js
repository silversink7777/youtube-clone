import{r as g,c as a,o,F as _,x as M,a as e,t as c,n as w,p as V,m as B,d,e as Y,u as j,S as z,h as D,j as b,I as F,s as S}from"./app-CCjr50S1.js";import{_ as P,a as q}from"./AppSidebar-BZY06KY6.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"flex space-x-3 mb-6 overflow-x-auto scrollbar-hide"},O=["onClick"],Q={__name:"CategoryTabs",props:{initialCategory:{type:String,default:"all"}},emits:["category-changed"],setup(t,{emit:p}){const u=t,n=p,i=g(u.initialCategory),x=[{id:"all",name:"すべて"},{id:"music",name:"音楽"},{id:"news",name:"ニュース"},{id:"mix",name:"ミックス"},{id:"live",name:"ライブ"},{id:"podcast",name:"ポッドキャスト"},{id:"pets",name:"ペット"},{id:"soccer",name:"サッカー"},{id:"animation",name:"アニメーション"},{id:"recent",name:"最近アップロードされた動画"},{id:"watched",name:"視聴済み"}],y=v=>{i.value=v,n("category-changed",v)};return(v,m)=>(o(),a("div",R,[(o(),a(_,null,M(x,l=>e("button",{key:l.id,onClick:s=>y(l.id),class:w(["px-4 py-2 rounded-full text-sm whitespace-nowrap transition-all duration-200 font-medium",i.value===l.id?"bg-black text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"])},c(l.name),11,O)),64))]))}},G=L(Q,[["__scopeId","data-v-72c771ab"]]),J={class:"w-full h-44 bg-gray-900 flex items-center justify-center"},K=["src","poster"],U={key:0,class:"absolute inset-0 bg-gray-900 flex items-center justify-center"},W={key:1,class:"absolute inset-0 bg-gray-800 flex flex-col items-center justify-center text-gray-300"},X=["src","alt"],Z={key:0,class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"},ee={key:1,class:"absolute top-2 left-2 bg-red-600 text-white text-xs px-2 py-1 rounded font-medium flex items-center space-x-1"},te={class:"absolute bottom-2 right-2 bg-black bg-opacity-80 text-white text-xs px-2 py-1 rounded font-medium"},se={key:2,class:"absolute top-2 right-2 bg-black bg-opacity-80 text-white text-xs px-2 py-1 rounded font-medium"},oe={class:"flex mt-3 space-x-3"},le=["src","alt"],ae={key:1,class:"w-full h-full rounded-full flex items-center justify-center text-white text-sm font-medium"},ie={class:"flex-1 min-w-0"},ne={class:"font-medium text-sm line-clamp-2 text-gray-900 group-hover:text-blue-600 transition-colors leading-5 mb-1"},re={class:"text-gray-600 text-xs hover:text-gray-800 transition-colors"},de={class:"text-gray-600 text-xs mt-1"},ue={class:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity"},ce={__name:"VideoCard",props:{video:{type:Object,required:!0}},setup(t){const p=g(!1),u=g(!1),n=g(!1),i=g(!1),x=g(!1),y=g(!1),v=g(null);let m=null;const l=async()=>{i.value=!0,m=setTimeout(async()=>{if(i.value&&y.value&&v.value&&!n.value)try{await v.value.play(),x.value=!0}catch(h){console.log("動画再生エラー:",h)}},500)},s=()=>{i.value=!1,x.value=!1,m&&(clearTimeout(m),m=null),v.value&&!n.value&&(v.value.pause(),v.value.currentTime=0)},f=()=>{u.value=!0,n.value=!1},A=()=>{n.value=!0,u.value=!1,y.value=!1},N=()=>{y.value=!0},H=h=>h>=1e4?`${(h/1e4).toFixed(1)}万`:h.toLocaleString(),E=h=>{const r=new Date,T=new Date(h),k=Math.floor((r-T)/(1e3*60*60));if(k<24)return`${k} 時間前`;const C=Math.floor(k/24);if(C<30)return`${C} 日前`;const $=Math.floor(C/30);return $<12?`${$} か月前`:`${Math.floor($/12)} 年前`};return(h,r)=>(o(),V(j(z),{href:`/watch/${t.video.id}`,class:"cursor-pointer group block"},{default:B(()=>[e("div",{class:"relative overflow-hidden rounded-xl",onMouseenter:l,onMouseleave:s},[e("div",J,[e("video",{ref_key:"videoRef",ref:v,src:t.video.video_url,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",muted:"",loop:"",preload:"metadata",poster:t.video.thumbnail,onLoadeddata:f,onError:A,onCanplay:N}," お使いのブラウザは動画の再生をサポートしていません。 ",40,K),!u.value&&!n.value?(o(),a("div",U,r[1]||(r[1]=[e("svg",{class:"w-8 h-8 text-white animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):d("",!0),n.value?(o(),a("div",W,r[2]||(r[2]=[e("svg",{class:"w-12 h-12 mb-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1),e("span",{class:"text-xs"},"動画を読み込めません",-1)]))):d("",!0),n.value&&t.video.thumbnail?(o(),a("img",{key:2,src:t.video.thumbnail,alt:t.video.title,class:"absolute inset-0 w-full h-full object-cover"},null,8,X)):d("",!0)]),!i.value||n.value?(o(),a("div",Z,r[3]||(r[3]=[e("div",{class:"bg-black bg-opacity-70 rounded-full p-4"},[e("svg",{class:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8 5v14l11-7z"})])],-1)]))):d("",!0),x.value&&i.value?(o(),a("div",ee,r[4]||(r[4]=[e("div",{class:"w-2 h-2 bg-white rounded-full animate-pulse"},null,-1),e("span",null,"プレビュー",-1)]))):d("",!0),e("div",te,c(t.video.duration),1),t.video.channelBadge?(o(),a("div",se,c(t.video.channelBadge),1)):d("",!0),t.video.specialBadge?(o(),a("div",{key:3,class:w(["absolute top-2 right-2 text-white text-xs px-2 py-1 rounded font-medium",t.video.specialBadgeColor||"bg-red-600"])},c(t.video.specialBadge),3)):d("",!0),r[5]||(r[5]=e("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))],32),e("div",oe,[e("div",{class:w(["w-9 h-9 rounded-full flex-shrink-0",t.video.channelColor||"bg-gray-400"])},[t.video.channelAvatar?(o(),a("img",{key:0,src:t.video.channelAvatar,alt:t.video.channelName,class:"w-full h-full rounded-full object-cover"},null,8,le)):(o(),a("div",ae,c(t.video.channelInitial),1))],2),e("div",ie,[e("h3",ne,c(t.video.title),1),e("p",re,c(t.video.channelName),1),e("p",de,c(H(t.video.views))+" 回視聴 • "+c(E(t.video.publishedAt)),1)]),e("div",ue,[e("button",{class:"p-1 rounded-full hover:bg-gray-100",onClick:r[0]||(r[0]=Y(T=>p.value=!p.value,["prevent","stop"]))},r[6]||(r[6]=[e("svg",{class:"w-4 h-4 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})],-1)]))])])]),_:1},8,["href"]))}},I=L(ce,[["__scopeId","data-v-1f01045e"]]),ve={class:"min-h-screen bg-gray-50"},fe={class:"flex"},ge={class:"p-6"},me={key:0,class:"mb-6"},he={class:"text-2xl font-semibold text-gray-900"},xe={key:1,class:"mb-6"},ye={class:"text-xl font-semibold text-gray-900"},pe={class:"text-gray-600 mt-1"},be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4"},we={key:2,class:"text-center py-12"},ke={class:"mt-1 text-sm text-gray-500"},Ce={key:3,class:"mt-12"},$e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},_e={key:4,class:"mt-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-8 text-white"},Me={class:"max-w-2xl mx-auto text-center"},Ve={class:"flex flex-col sm:flex-row gap-4 justify-center"},Be={__name:"YouTube",props:{videos:{type:Array,default:()=>[]},newsVideos:{type:Array,default:()=>[]}},setup(t){const p=t,u=g(!1),n=g("all"),i=g(""),x=()=>{u.value=!u.value},y=l=>{n.value=l,i.value=""},v=l=>{i.value=l,n.value="all"},m=D(()=>{let l=p.videos;if(i.value){const s=i.value.toLowerCase();l=l.filter(f=>f.title.toLowerCase().includes(s)||f.channelName.toLowerCase().includes(s))}return n.value!=="all"&&!i.value&&(l=l.filter(s=>s.category===n.value)),l});return(l,s)=>(o(),a("div",ve,[b(P,{onToggleSidebar:x,onSearch:v}),e("div",fe,[u.value?d("",!0):(o(),a("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:s[0]||(s[0]=f=>u.value=!0)})),b(q,{isCollapsed:u.value},null,8,["isCollapsed"]),e("main",{class:w(["flex-1 transition-all duration-300",u.value?"ml-20":"ml-80"]),style:F({marginLeft:u.value?"80px":"320px"})},[d("",!0),e("div",ge,[l.$page.props.auth.user?(o(),a("div",me,[e("h1",he," こんにちは、"+c(l.$page.props.auth.user.name)+"さん ",1),s[1]||(s[1]=e("p",{class:"text-gray-600 mt-1"},"おすすめの動画をお楽しみください",-1))])):d("",!0),i.value?(o(),a("div",xe,[e("h2",ye," 「"+c(i.value)+"」の検索結果 ",1),e("p",pe,c(m.value.length)+"件の動画が見つかりました",1)])):d("",!0),b(G,{onCategoryChanged:y}),e("div",be,[(o(!0),a(_,null,M(m.value,f=>(o(),V(I,{key:f.id,video:f},null,8,["video"]))),128))]),m.value.length===0?(o(),a("div",we,[s[2]||(s[2]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)),s[3]||(s[3]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"動画が見つかりません",-1)),e("p",ke,c(i.value?"検索条件を変更してお試しください":"選択されたカテゴリに動画がありません"),1)])):d("",!0),!i.value&&n.value==="all"&&t.newsVideos.length>0?(o(),a("div",Ce,[s[4]||(s[4]=e("h2",{class:"text-xl font-semibold mb-6 text-gray-900"},"トップニュース",-1)),e("div",$e,[(o(!0),a(_,null,M(t.newsVideos,f=>(o(),V(I,{key:f.id,video:f},null,8,["video"]))),128))])])):d("",!0),l.$page.props.auth.user?d("",!0):(o(),a("div",_e,[e("div",Me,[s[7]||(s[7]=e("h3",{class:"text-2xl font-bold mb-4"},"YouTubeをもっと楽しもう",-1)),s[8]||(s[8]=e("p",{class:"text-lg mb-6 opacity-90"}," アカウントを作成して、お気に入りの動画を保存したり、コメントを投稿したりしましょう ",-1)),e("div",Ve,[b(j(z),{href:"/register",class:"px-6 py-3 bg-white text-blue-600 font-semibold rounded-lg hover:bg-gray-100 transition-colors"},{default:B(()=>s[5]||(s[5]=[S(" 無料でアカウント作成 ")])),_:1,__:[5]}),b(j(z),{href:"/login",class:"px-6 py-3 border-2 border-white text-white font-semibold rounded-lg hover:bg-white hover:text-blue-600 transition-colors"},{default:B(()=>s[6]||(s[6]=[S(" ログイン ")])),_:1,__:[6]})])])]))])],6)])]))}},Se=L(Be,[["__scopeId","data-v-96066145"]]);export{Se as default};
