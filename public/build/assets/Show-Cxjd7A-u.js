import{b as ne,r as f,h as R,f as re,c as r,o as l,j as A,a as e,d as v,t as i,B as le,n as p,s as T,e as O,i as H,C as P,F as V,x as L,m as ie,u as de,S as ce,W as ue}from"./app-CCjr50S1.js";import{_ as ve,a as he}from"./AppSidebar-BZY06KY6.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const fe={class:"min-h-screen bg-white"},pe={class:"flex"},ge={class:"flex-1",style:{"margin-left":"80px"}},me={class:"max-w-[1754px] mx-auto flex gap-6 p-6"},ke={class:"flex-1 max-w-[1280px]"},be={class:"bg-black rounded-lg overflow-hidden mb-4",style:{"aspect-ratio":"16/9"}},ye=["src"],_e={class:"text-xl font-semibold text-black mb-3 leading-7"},we={class:"flex items-center justify-between mb-4"},Ce={class:"flex items-center space-x-3"},je=["src","alt"],Me={key:1,class:"w-full h-full rounded-full flex items-center justify-center text-white text-sm font-medium"},$e={class:"flex flex-col"},Se={class:"font-medium text-black text-sm"},Ae={class:"text-gray-600 text-xs"},Te={key:0,class:"bg-gray-100 rounded-lg p-3 mb-6"},Ve={class:"text-sm"},Le={class:"font-medium text-black mb-1"},Ee={class:"text-gray-800 leading-relaxed whitespace-pre-line"},Be={class:"mt-8"},ze={class:"flex items-center space-x-4 mb-6"},De={class:"text-xl font-semibold text-black"},Fe={key:0,class:"flex space-x-3 mb-6"},Ne={class:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium"},Re={class:"flex-1"},Oe={key:0,class:"flex justify-end space-x-2 mt-2"},He=["disabled"],Pe={key:1,class:"text-center py-8"},Ie={key:2,class:"space-y-4"},Ue={class:"flex space-x-3"},Ke={class:"flex-1"},Xe={class:"flex items-center space-x-2 mb-1"},qe={key:0,class:"bg-red-600 text-white text-xs px-2 py-1 rounded font-medium"},Je={class:"text-xs text-gray-600"},We={key:0,class:"flex items-center space-x-4"},Ye=["onClick"],Ge={key:0,class:"text-xs"},Qe=["onClick"],Ze={key:0,class:"text-xs"},et=["onClick"],tt=["onClick"],st=["onClick"],ot={key:1,class:"mt-3 ml-3"},at=["onSubmit"],nt={class:"flex space-x-3"},rt={class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0"},lt={class:"flex-1"},it=["placeholder"],dt={class:"flex justify-end space-x-2 mt-2"},ct=["disabled"],ut={key:2,class:"mt-4 ml-8 space-y-3"},vt={class:"flex-1"},ht={class:"flex items-center space-x-2 mb-1"},xt={class:"text-xs text-gray-600"},ft={key:0,class:"flex items-center space-x-4"},pt=["onClick"],gt={key:0,class:"text-xs"},mt=["onClick"],kt={key:0,class:"text-xs"},bt=["onClick"],yt={key:3,class:"text-center py-8 text-gray-500"},_t={key:0,class:"text-xs mt-1"},wt={class:"w-[426px] flex-shrink-0"},Ct={class:"space-y-2"},jt={class:"space-y-3"},Mt={class:"flex-1 min-w-0"},$t={class:"text-sm font-medium text-black line-clamp-2 mb-1"},St={class:"text-xs text-gray-600"},At={__name:"Show",props:{video:{type:Object,required:!0}},setup(h){const x=h,I=ne(),S=f(!0),U=f(null),M=f(!1),u=f([]),w=f(!1),m=f(""),$=f(!1),C=f(!1),b=f(null),g=f(""),j=f(!1),K=()=>{S.value=!0},X=n=>{ue.get("/",{search:n})},q=()=>{M.value=!M.value},J=R(()=>x.video.description?M.value||x.video.description.length<=150?x.video.description:x.video.description.substring(0,150):""),k=R(()=>{var n;return((n=I.props.auth)==null?void 0:n.user)||null}),y=()=>{var t;const n=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content");if(!n)throw console.error("CSRF token not found"),new Error("CSRF token not found");return n},W=async()=>{w.value=!0;try{console.log("コメント読み込み開始:",x.video.id);const t=await(await fetch(`/api/videos/${x.video.id}/comments`)).json();console.log("コメントデータ受信:",t),u.value=t.comments||[],console.log("設定されたコメント配列:",u.value)}catch(n){console.error("コメントの読み込みに失敗しました:",n)}finally{w.value=!1}},Y=async()=>{if(!(!m.value.trim()||C.value)){C.value=!0;try{const n=y();console.log("コメント投稿開始:",m.value);const t=await fetch(`/api/videos/${x.video.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":n,Accept:"application/json"},body:JSON.stringify({content:m.value})});if(t.ok){const o=await t.json();console.log("投稿されたコメント:",o.comment),u.value.unshift(o.comment),console.log("更新後のコメント配列:",u.value),m.value="",$.value=!1}else{let o="コメントの投稿に失敗しました";try{const s=await t.json();o=s.error||s.message||o,console.error("コメント投稿エラー詳細:",s)}catch(s){console.error("エラーレスポンスのパースに失敗:",s)}alert(o)}}catch(n){console.error("コメント投稿エラー:",n),alert("コメントの投稿に失敗しました: "+n.message)}finally{C.value=!1}}},G=async n=>{if(!(!g.value.trim()||j.value)){j.value=!0;try{const t=y(),o=await fetch(`/api/videos/${x.video.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t,Accept:"application/json"},body:JSON.stringify({content:g.value,parent_id:n})});if(o.ok){const s=await o.json(),a=u.value.find(d=>d.id===n);a&&(a.replies||(a.replies=[]),a.replies.push(s.comment)),g.value="",b.value=null}else{let s="返信の投稿に失敗しました";try{const a=await o.json();s=a.error||a.message||s,console.error("返信投稿エラー詳細:",a)}catch(a){console.error("エラーレスポンスのパースに失敗:",a)}alert(s)}}catch(t){console.error("返信投稿エラー:",t),alert("返信の投稿に失敗しました: "+t.message)}finally{j.value=!1}}},E=async n=>{if(confirm("このコメントを削除しますか？"))try{const t=y(),o=await fetch(`/api/videos/${x.video.id}/comments/${n.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":t,Accept:"application/json"}});if(o.ok)if(n.parent_id){const s=u.value.find(a=>a.id===n.parent_id);s&&s.replies&&(s.replies=s.replies.filter(a=>a.id!==n.id))}else u.value=u.value.filter(s=>s.id!==n.id);else{let s="コメントの削除に失敗しました";try{const a=await o.json();s=a.error||a.message||s}catch(a){console.error("エラーレスポンスのパースに失敗:",a)}alert(s)}}catch(t){console.error("コメント削除エラー:",t),alert("コメントの削除に失敗しました: "+t.message)}},Q=async n=>{try{const t=y(),o=await fetch(`/api/videos/${x.video.id}/comments/${n.id}/pin`,{method:"PATCH",headers:{"X-CSRF-TOKEN":t,Accept:"application/json"}});if(o.ok){const s=await o.json(),a=u.value.findIndex(d=>d.id===n.id);if(a!==-1&&(u.value[a].is_pinned=s.comment.is_pinned,s.comment.is_pinned)){const d=u.value.splice(a,1)[0];u.value.unshift(d)}}else{let s="ピン留めの変更に失敗しました";try{const a=await o.json();s=a.error||a.message||s}catch(a){console.error("エラーレスポンスのパースに失敗:",a)}alert(s)}}catch(t){console.error("ピン留めエラー:",t),alert("ピン留めの変更に失敗しました: "+t.message)}},Z=n=>{b.value===n?(b.value=null,g.value=""):(b.value=n,g.value="")},ee=()=>{m.value="",$.value=!1},te=()=>{b.value=null,g.value=""},se=n=>{var t;return x.video.user_id===parseInt((t=k.value)==null?void 0:t.id)&&!n.parent_id},B=n=>{const t=n.target;t.style.height="auto",t.style.height=`${Math.min(t.scrollHeight,100)}px`},oe=()=>{console.log("Video loaded successfully")},ae=n=>{console.error("Video loading error:",n)},z=n=>n>=1e4?`${(n/1e4).toFixed(1)}万`:n.toLocaleString(),D=n=>{const t=new Date,o=new Date(n),s=Math.floor((t-o)/(1e3*60*60));if(s<24)return`${s} 時間前`;const a=Math.floor(s/24);if(a<30)return`${a} 日前`;const d=Math.floor(a/30);return d<12?`${d} か月前`:`${Math.floor(d/12)} 年前`},F=async n=>{if(!k.value){alert("いいねするにはログインが必要です");return}try{const t=y(),o=await fetch(`/api/videos/${x.video.id}/comments/${n.id}/like`,{method:"POST",headers:{"X-CSRF-TOKEN":t,Accept:"application/json"}});if(o.ok){const s=await o.json(),a=(d,_)=>{for(let c=0;c<d.length;c++){if(d[c].id===_)return d[c].is_liked=s.is_liked,d[c].likes_count=s.likes_count,d[c].is_disliked=s.is_disliked,d[c].dislikes_count=s.dislikes_count,!0;if(d[c].replies&&d[c].replies.length>0&&a(d[c].replies,_))return!0}return!1};a(u.value,n.id)}else{let s="いいね処理に失敗しました";try{const a=await o.json();s=a.error||a.message||s}catch(a){console.error("エラーレスポンスのパースに失敗:",a)}alert(s)}}catch(t){console.error("いいねエラー:",t),alert("いいね処理に失敗しました: "+t.message)}},N=async n=>{if(!k.value){alert("きらいするにはログインが必要です");return}try{const t=y(),o=await fetch(`/api/videos/${x.video.id}/comments/${n.id}/dislike`,{method:"POST",headers:{"X-CSRF-TOKEN":t,Accept:"application/json"}});if(o.ok){const s=await o.json(),a=(d,_)=>{for(let c=0;c<d.length;c++){if(d[c].id===_)return d[c].is_liked=s.is_liked,d[c].likes_count=s.likes_count,d[c].is_disliked=s.is_disliked,d[c].dislikes_count=s.dislikes_count,!0;if(d[c].replies&&d[c].replies.length>0&&a(d[c].replies,_))return!0}return!1};a(u.value,n.id)}else{let s="きらい処理に失敗しました";try{const a=await o.json();s=a.error||a.message||s}catch(a){console.error("エラーレスポンスのパースに失敗:",a)}alert(s)}}catch(t){console.error("きらいエラー:",t),alert("きらい処理に失敗しました: "+t.message)}};return re(()=>{W()}),(n,t)=>(l(),r("div",fe,[A(ve,{onToggleSidebar:K,onSearch:X}),e("div",pe,[S.value?v("",!0):(l(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:t[0]||(t[0]=o=>S.value=!0)})),A(he,{isCollapsed:!0}),e("main",ge,[e("div",me,[e("div",ke,[e("div",be,[e("video",{ref_key:"videoPlayer",ref:U,src:h.video.video_url,class:"w-full h-full",controls:"",autoplay:"",onLoadedmetadata:oe,onError:ae}," お使いのブラウザは動画の再生をサポートしていません。 ",40,ye)]),e("h1",_e,i(h.video.title),1),e("div",we,[e("div",Ce,[e("div",{class:p(["w-10 h-10 rounded-full flex-shrink-0",h.video.channelColor||"bg-gray-400"])},[h.video.channelAvatar?(l(),r("img",{key:0,src:h.video.channelAvatar,alt:h.video.channelName,class:"w-full h-full rounded-full object-cover"},null,8,je)):(l(),r("div",Me,i(h.video.channelInitial),1))],2),e("div",$e,[e("h3",Se,i(h.video.channelName),1),e("p",Ae,i(z(h.video.views))+" 回視聴 • "+i(D(h.video.publishedAt)),1)]),t[4]||(t[4]=e("button",{class:"ml-6 px-6 py-2 bg-black text-white rounded-full text-sm font-medium hover:bg-gray-800 transition-colors"}," チャンネル登録 ",-1))]),t[5]||(t[5]=le('<div class="flex items-center space-x-2" data-v-90a16300><div class="flex items-center bg-gray-100 rounded-full overflow-hidden" data-v-90a16300><button class="flex items-center space-x-2 px-4 py-2 hover:bg-gray-200 transition-colors" data-v-90a16300><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-90a16300><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" data-v-90a16300></path></svg><span class="text-sm font-medium" data-v-90a16300>高評価</span></button><div class="w-px h-6 bg-gray-300" data-v-90a16300></div><button class="px-4 py-2 hover:bg-gray-200 transition-colors" data-v-90a16300><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-90a16300><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018c.163 0 .326.02.485.06L17 4m-7 10v2a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0-.714.211-1.412.608-2.006L17 13v-9m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5" data-v-90a16300></path></svg></button></div><button class="flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors" data-v-90a16300><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-90a16300><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" data-v-90a16300></path></svg><span class="text-sm font-medium" data-v-90a16300>共有</span></button><button class="flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors" data-v-90a16300><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-90a16300><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m0 0V3a1 1 0 011 1v10.586A2 2 0 0116.586 16H7.414A2 2 0 016 14.586V4a1 1 0 011-1z" data-v-90a16300></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V9a1 1 0 00-1-1H8a1 1 0 00-1 1v1" data-v-90a16300></path></svg><span class="text-sm font-medium" data-v-90a16300>クリップ</span></button><button class="flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors" data-v-90a16300><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-90a16300><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" data-v-90a16300></path></svg><span class="text-sm font-medium" data-v-90a16300>保存</span></button><button class="flex items-center justify-center w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors" data-v-90a16300><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-90a16300><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" data-v-90a16300></path></svg></button></div>',1))]),h.video.description?(l(),r("div",Te,[e("div",Ve,[e("p",Le,i(z(h.video.views))+" 回視聴 "+i(D(h.video.publishedAt)),1),e("div",Ee,[T(i(J.value)+" ",1),h.video.description.length>150?(l(),r("button",{key:0,onClick:q,class:"text-black font-medium ml-1 hover:underline"},i(M.value?"簡潔に表示":"...さらに表示"),1)):v("",!0)])])])):v("",!0),e("div",Be,[e("div",ze,[e("h3",De," コメント ("+i(u.value.length)+") ",1),t[6]||(t[6]=e("button",{class:"flex items-center space-x-1 text-sm text-gray-600 hover:text-black"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})]),e("span",null,"並び替え")],-1))]),k.value?(l(),r("div",Fe,[e("div",Ne,i(k.value.name.charAt(0).toUpperCase()),1),e("div",Re,[e("form",{onSubmit:O(Y,["prevent"])},[H(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>m.value=o),placeholder:"コメントを追加...",class:"w-full bg-transparent border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-sm py-2 min-h-[36px] max-h-[100px] resize-none",rows:"1",onFocus:t[2]||(t[2]=o=>$.value=!0),onInput:B},null,544),[[P,m.value]]),$.value?(l(),r("div",Oe,[e("button",{type:"button",onClick:ee,class:"px-4 py-2 text-sm text-gray-600 hover:text-black"}," キャンセル "),e("button",{type:"submit",disabled:!m.value.trim()||C.value,class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},i(C.value?"投稿中...":"コメント"),9,He)])):v("",!0)],32)])])):v("",!0),w.value?(l(),r("div",Pe,t[7]||(t[7]=[e("svg",{class:"w-8 h-8 text-gray-400 animate-spin mx-auto",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-sm text-gray-500 mt-2"},"コメントを読み込み中...",-1)]))):!w.value&&u.value&&u.value.length>0?(l(),r("div",Ie,[(l(!0),r(V,null,L(u.value,o=>(l(),r("div",{key:o.id,class:"comment-item"},[e("div",Ue,[e("div",{class:p(["w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-medium flex-shrink-0",o.is_deleted?"bg-gray-400":"bg-blue-500"])},i(o.user.channel_initial||o.user.name.charAt(0).toUpperCase()),3),e("div",Ke,[e("div",Xe,[e("span",{class:p(["font-medium text-sm",o.is_deleted?"text-gray-500":"text-black"])},i(o.user.channel_name||o.user.name),3),o.is_pinned&&!o.is_deleted?(l(),r("span",qe," ピン留め ")):v("",!0),e("span",Je,i(o.time_ago),1)]),e("p",{class:p(["text-sm mb-2 whitespace-pre-wrap",o.is_deleted?"text-gray-500 italic":"text-gray-800"])},i(o.content),3),o.is_deleted?v("",!0):(l(),r("div",We,[e("button",{onClick:s=>F(o),class:p(["flex items-center space-x-1 transition-colors",o.is_liked?"text-blue-600":"text-gray-600 hover:text-black"])},[t[8]||(t[8]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),o.likes_count>0?(l(),r("span",Ge,i(o.likes_count),1)):v("",!0)],10,Ye),e("button",{onClick:s=>N(o),class:p(["flex items-center space-x-1 transition-colors",o.is_disliked?"text-red-600":"text-gray-600 hover:text-black"])},[t[9]||(t[9]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018c.163 0 .326.02.485.06L17 4m-7 10v2a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0-.714.211-1.412.608-2.006L17 13v-9m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})],-1)),o.dislikes_count>0?(l(),r("span",Ze,i(o.dislikes_count),1)):v("",!0)],10,Qe),k.value?(l(),r("button",{key:0,onClick:s=>Z(o.id),class:"text-xs text-gray-600 hover:text-black font-medium"}," 返信 ",8,et)):v("",!0),se(o)?(l(),r("button",{key:1,onClick:s=>Q(o),class:"text-xs text-gray-600 hover:text-black font-medium"},i(o.is_pinned?"ピン留め解除":"ピン留め"),9,tt)):v("",!0),o.can_delete?(l(),r("button",{key:2,onClick:s=>E(o),class:"text-xs text-red-600 hover:text-red-800 font-medium"}," 削除 ",8,st)):v("",!0)])),b.value===o.id?(l(),r("div",ot,[e("form",{onSubmit:O(s=>G(o.id),["prevent"])},[e("div",nt,[e("div",rt,i(k.value.name.charAt(0).toUpperCase()),1),e("div",lt,[H(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>g.value=s),placeholder:`@${o.user.channel_name||o.user.name} に返信`,class:"w-full bg-transparent border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-sm py-2 min-h-[36px] max-h-[100px] resize-none",rows:"1",onInput:B},null,40,it),[[P,g.value]]),e("div",dt,[e("button",{type:"button",onClick:te,class:"px-4 py-2 text-sm text-gray-600 hover:text-black"}," キャンセル "),e("button",{type:"submit",disabled:!g.value.trim()||j.value,class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},i(j.value?"投稿中...":"返信"),9,ct)])])])],40,at)])):v("",!0),o.replies&&o.replies.length>0?(l(),r("div",ut,[(l(!0),r(V,null,L(o.replies,s=>(l(),r("div",{key:s.id,class:"flex space-x-3"},[e("div",{class:p(["w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0",s.is_deleted?"bg-gray-400":"bg-green-500"])},i(s.user.channel_initial||s.user.name.charAt(0).toUpperCase()),3),e("div",vt,[e("div",ht,[e("span",{class:p(["font-medium text-sm",s.is_deleted?"text-gray-500":"text-black"])},i(s.user.channel_name||s.user.name),3),e("span",xt,i(s.time_ago),1)]),e("p",{class:p(["text-sm mb-2 whitespace-pre-wrap",s.is_deleted?"text-gray-500 italic":"text-gray-800"])},i(s.content),3),s.is_deleted?v("",!0):(l(),r("div",ft,[e("button",{onClick:a=>F(s),class:p(["flex items-center space-x-1 transition-colors",s.is_liked?"text-blue-600":"text-gray-600 hover:text-black"])},[t[10]||(t[10]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.60L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),s.likes_count>0?(l(),r("span",gt,i(s.likes_count),1)):v("",!0)],10,pt),e("button",{onClick:a=>N(s),class:p(["flex items-center space-x-1 transition-colors",s.is_disliked?"text-red-600":"text-gray-600 hover:text-black"])},[t[11]||(t[11]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018c.163 0 .326.02.485.60L17 4m-7 10v2a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0 .714.211-1.412.608-2.006L17 13v-9m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})],-1)),s.dislikes_count>0?(l(),r("span",kt,i(s.dislikes_count),1)):v("",!0)],10,mt),s.can_delete?(l(),r("button",{key:0,onClick:a=>E(s),class:"text-xs text-red-600 hover:text-red-800 font-medium"}," 削除 ",8,bt)):v("",!0)]))])]))),128))])):v("",!0)])])]))),128))])):!w.value&&(!u.value||u.value.length===0)?(l(),r("div",yt,[t[14]||(t[14]=e("svg",{class:"mx-auto h-12 w-12 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),t[15]||(t[15]=e("p",{class:"text-sm"},"まだコメントはありません",-1)),k.value?v("",!0):(l(),r("p",_t,[A(de(ce),{href:"/login",class:"text-blue-600 hover:underline"},{default:ie(()=>t[12]||(t[12]=[T("ログイン")])),_:1,__:[12]}),t[13]||(t[13]=T("してコメントを投稿しましょう "))]))])):v("",!0)])]),e("div",wt,[e("div",Ct,[t[18]||(t[18]=e("div",{class:"flex space-x-2 mb-4"},[e("button",{class:"px-3 py-1 bg-black text-white rounded-lg text-sm font-medium"}," すべて "),e("button",{class:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-black rounded-lg text-sm font-medium"}," このチャンネルから ")],-1)),t[19]||(t[19]=e("h3",{class:"font-semibold text-black mb-4"},"関連動画",-1)),e("div",jt,[(l(),r(V,null,L(8,o=>e("div",{key:o,class:"flex space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors"},[t[17]||(t[17]=e("div",{class:"w-40 h-24 bg-gray-200 rounded-lg flex-shrink-0 flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8 5v14l11-7z"})])],-1)),e("div",Mt,[e("h4",$t," 関連動画のタイトル "+i(o),1),t[16]||(t[16]=e("p",{class:"text-xs text-gray-600 mb-1"},"チャンネル名",-1)),e("p",St,i(Math.floor(Math.random()*1e3))+"万 回視聴 • "+i(Math.floor(Math.random()*30)+1)+"日前 ",1)])])),64))])])])])])])]))}},Et=xe(At,[["__scopeId","data-v-90a16300"]]);export{Et as default};
