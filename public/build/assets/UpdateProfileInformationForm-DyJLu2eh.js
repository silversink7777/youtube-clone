import{x as V,i as v,f as a,o as i,a as e,h as g,e as d,y,E as B,b as m,j as s,k as c,q as x,w as L,g as _,S as U,n as z,W as I}from"./app-DPRt9oD9.js";import{_ as f}from"./InputError-BL2UngUI.js";const M={class:"bg-white rounded-lg shadow"},N={key:0,class:"flex items-center space-x-6"},E={class:"flex-shrink-0"},q={class:"relative"},F=["src","alt"],H={class:"relative"},T={class:"flex-1"},$={class:"flex space-x-3"},A={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},D={class:"text-sm text-yellow-800"},R={class:"mt-2 text-sm text-green-600"},W=["placeholder"],O={class:"flex items-center justify-between pt-4 border-t border-gray-200"},G={class:"flex items-center"},J={key:0,class:"flex items-center text-sm text-green-600"},K=["disabled"],Q={key:0,class:"flex items-center"},X={key:1},ee={__name:"UpdateProfileInformationForm",props:{user:Object},setup(u){const b=u,o=V({_method:"PUT",name:b.user.name,email:b.user.email,channel_name:b.user.channel_name||"",channel_description:b.user.channel_description||"",photo:null}),w=v(null),p=v(null),n=v(null),C=()=>{n.value&&(o.photo=n.value.files[0]),o.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>k()})},P=()=>{w.value=!0},h=()=>{n.value.click()},j=()=>{const r=n.value.files[0];if(!r)return;const t=new FileReader;t.onload=l=>{p.value=l.target.result},t.readAsDataURL(r)},S=()=>{I.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{p.value=null,k()}})},k=()=>{var r;(r=n.value)!=null&&r.value&&(n.value.value=null)};return(r,t)=>(i(),a("div",M,[t[17]||(t[17]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"プロフィール情報"),e("p",{class:"text-sm text-gray-600 mt-1"},"アカウントのプロフィール情報とメールアドレスを更新してください。")],-1)),e("form",{onSubmit:_(C,["prevent"]),class:"p-6 space-y-6"},[r.$page.props.jetstream.managesProfilePhotos?(i(),a("div",N,[e("div",E,[e("input",{id:"photo",ref_key:"photoInput",ref:n,type:"file",class:"hidden",onChange:j},null,544),d(e("div",q,[e("img",{src:u.user.profile_photo_url,alt:u.user.name,class:"w-20 h-20 rounded-full object-cover border-4 border-gray-200"},null,8,F),e("button",{type:"button",onClick:h,class:"absolute bottom-0 right-0 w-7 h-7 bg-red-600 rounded-full flex items-center justify-center text-white hover:bg-red-700 transition-colors"},t[4]||(t[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)]))],512),[[y,!p.value]]),d(e("div",H,[e("div",{class:"w-20 h-20 rounded-full bg-cover bg-no-repeat bg-center border-4 border-gray-200",style:B("background-image: url('"+p.value+"');")},null,4),e("button",{type:"button",onClick:h,class:"absolute bottom-0 right-0 w-7 h-7 bg-red-600 rounded-full flex items-center justify-center text-white hover:bg-red-700 transition-colors"},t[5]||(t[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)]))],512),[[y,p.value]])]),e("div",T,[t[6]||(t[6]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"プロフィール写真",-1)),e("div",$,[e("button",{type:"button",onClick:h,class:"px-4 py-2 bg-gray-100 text-gray-700 text-sm rounded-md hover:bg-gray-200 transition-colors"}," 写真を変更 "),u.user.profile_photo_path?(i(),a("button",{key:0,type:"button",onClick:S,class:"px-4 py-2 bg-red-100 text-red-700 text-sm rounded-md hover:bg-red-200 transition-colors"}," 削除 ")):g("",!0)]),m(f,{message:s(o).errors.photo,class:"mt-2"},null,8,["message"])])])):g("",!0),e("div",null,[t[7]||(t[7]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" 名前 "),e("span",{class:"text-red-500"},"*")],-1)),d(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=l=>s(o).name=l),type:"text",required:"",autocomplete:"name",class:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 text-sm",placeholder:"あなたの名前を入力"},null,512),[[x,s(o).name]]),m(f,{message:s(o).errors.name,class:"mt-1"},null,8,["message"])]),e("div",null,[t[10]||(t[10]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" メールアドレス "),e("span",{class:"text-red-500"},"*")],-1)),d(e("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=l=>s(o).email=l),type:"email",required:"",autocomplete:"username",class:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 text-sm",placeholder:"your@email.com"},null,512),[[x,s(o).email]]),m(f,{message:s(o).errors.email,class:"mt-1"},null,8,["message"]),r.$page.props.jetstream.hasEmailVerification&&u.user.email_verified_at===null?(i(),a("div",A,[e("p",D,[t[9]||(t[9]=c(" メールアドレスが未認証です。 ")),m(s(U),{href:r.route("verification.send"),method:"post",as:"button",class:"underline text-yellow-800 hover:text-yellow-900 font-medium",onClick:_(P,["prevent"])},{default:L(()=>t[8]||(t[8]=[c(" 認証メールを再送信する ")])),_:1,__:[8]},8,["href"])]),d(e("div",R," 新しい認証リンクがメールアドレスに送信されました。 ",512),[[y,w.value]])])):g("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{for:"channel_name",class:"block text-sm font-medium text-gray-700 mb-2"}," チャンネル名 ",-1)),d(e("input",{id:"channel_name","onUpdate:modelValue":t[2]||(t[2]=l=>s(o).channel_name=l),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 text-sm",placeholder:u.user.name+" のチャンネル"},null,8,W),[[x,s(o).channel_name]]),t[12]||(t[12]=e("p",{class:"mt-1 text-xs text-gray-500"},"空欄の場合、お名前がチャンネル名として使用されます。",-1)),m(f,{message:s(o).errors.channel_name,class:"mt-1"},null,8,["message"])]),e("div",null,[t[13]||(t[13]=e("label",{for:"channel_description",class:"block text-sm font-medium text-gray-700 mb-2"}," チャンネル説明 ",-1)),d(e("textarea",{id:"channel_description","onUpdate:modelValue":t[3]||(t[3]=l=>s(o).channel_description=l),rows:"4",class:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500 text-sm",placeholder:"あなたのチャンネルについて説明してください..."},null,512),[[x,s(o).channel_description]]),t[14]||(t[14]=e("p",{class:"mt-1 text-xs text-gray-500"},"視聴者にあなたのチャンネルについて知ってもらいましょう。",-1)),m(f,{message:s(o).errors.channel_description,class:"mt-1"},null,8,["message"])]),e("div",O,[e("div",G,[s(o).recentlySuccessful?(i(),a("div",J,t[15]||(t[15]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),c(" 保存されました ")]))):g("",!0)]),e("button",{type:"submit",disabled:s(o).processing,class:z(["px-6 py-2 rounded-md text-sm font-medium text-white transition-colors",s(o).processing?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"])},[s(o).processing?(i(),a("span",Q,t[16]||(t[16]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),c(" 保存中... ")]))):(i(),a("span",X,"変更を保存"))],10,K)])],32)]))}};export{ee as default};
