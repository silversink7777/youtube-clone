import{B as he,i as x,d as V,D as xe,f as r,o as n,b as B,a as t,h as d,t as i,p as fe,n as p,k as z,g as X,e as W,q,F as O,l as N,w as pe,j as ge,S as me,W as ke,s as be}from"./app-DPRt9oD9.js";import{_ as _e,a as ye}from"./AppSidebar-CITcabvS.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce={class:"min-h-screen bg-white"},Me={class:"flex"},je={class:"flex-1",style:{"margin-left":"80px"}},Ee={class:"max-w-[1754px] mx-auto flex gap-6 p-6"},Ae={class:"flex-1 max-w-[1280px]"},Se={class:"bg-black rounded-lg overflow-hidden mb-4 relative",style:{"aspect-ratio":"16/9"}},$e=["src"],Te={key:0,class:"absolute inset-0 bg-black flex items-center justify-center"},Re={key:1,class:"absolute inset-0 bg-gray-800 flex flex-col items-center justify-center text-white"},De={class:"text-lg"},Ve={class:"text-xl font-semibold text-black mb-3 leading-7"},Le={class:"flex items-center justify-between mb-4"},Be={class:"flex items-center space-x-3"},ze=["src","alt"],Oe={key:1,class:"w-full h-full rounded-full flex items-center justify-center text-white text-sm font-medium"},Ne={class:"flex flex-col"},Fe={class:"font-medium text-black text-sm"},He={class:"text-gray-600 text-xs"},Ie={key:0,class:"bg-gray-100 rounded-lg p-3 mb-6"},Ue={class:"text-sm"},Pe={class:"font-medium text-black mb-1"},Ke={class:"text-gray-800 leading-relaxed whitespace-pre-line"},Xe={class:"mt-8"},We={class:"flex items-center space-x-4 mb-6"},qe={class:"text-xl font-semibold text-black"},Je={key:0,class:"flex space-x-3 mb-6"},Ye={class:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium"},Ge={class:"flex-1"},Qe={key:0,class:"flex justify-end space-x-2 mt-2"},Ze=["disabled"],et={key:1,class:"text-center py-8"},tt={key:2,class:"space-y-4"},st={class:"flex space-x-3"},ot={class:"flex-1"},at={class:"flex items-center space-x-2 mb-1"},lt={key:0,class:"bg-red-600 text-white text-xs px-2 py-1 rounded font-medium"},rt={class:"text-xs text-gray-600"},nt={key:0,class:"flex items-center space-x-4"},it=["onClick"],ct={key:0,class:"text-xs"},dt=["onClick"],ut={key:0,class:"text-xs"},vt=["onClick"],ht=["onClick"],xt=["onClick"],ft={key:1,class:"mt-3 ml-3"},pt=["onSubmit"],gt={class:"flex space-x-3"},mt={class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0"},kt={class:"flex-1"},bt=["placeholder"],_t={class:"flex justify-end space-x-2 mt-2"},yt=["disabled"],wt={key:2,class:"mt-4 ml-8 space-y-3"},Ct={class:"flex-1"},Mt={class:"flex items-center space-x-2 mb-1"},jt={class:"text-xs text-gray-600"},Et={key:0,class:"flex items-center space-x-4"},At=["onClick"],St={key:0,class:"text-xs"},$t=["onClick"],Tt={key:0,class:"text-xs"},Rt=["onClick"],Dt={key:3,class:"text-center py-8 text-gray-500"},Vt={key:0,class:"text-xs mt-1"},Lt={class:"w-[426px] flex-shrink-0"},Bt={class:"space-y-2"},zt={class:"space-y-3"},Ot={class:"flex-1 min-w-0"},Nt={class:"text-sm font-medium text-black line-clamp-2 mb-1"},Ft={class:"text-xs text-gray-600"},Ht={__name:"Show",props:{video:{type:Object,required:!0}},setup(f){const h=f,J=he(),L=x(!0),M=x(null),$=x(!1),j=x(!0),_=x(!1),b=x("動画を読み込めません"),T=x(!1),R=V(()=>h.video.video_url&&(h.video.video_url.startsWith("http://")||h.video.video_url.startsWith("https://"))),Y=V(()=>R.value&&!T.value?`/video-proxy?url=${encodeURIComponent(h.video.video_url)}`:h.video.video_url),v=x([]),E=x(!1),m=x(""),D=x(!1),A=x(!1),y=x(null),g=x(""),S=x(!1),G=()=>{L.value=!0},Q=a=>{ke.get("/",{search:a})},Z=()=>{$.value=!$.value},ee=V(()=>h.video.description?$.value||h.video.description.length<=150?h.video.description:h.video.description.substring(0,150):""),k=V(()=>{var a;return((a=J.props.auth)==null?void 0:a.user)||null}),w=()=>{var e;const a=(e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content");if(!a)throw console.error("CSRF token not found"),new Error("CSRF token not found");return a},te=async()=>{E.value=!0;try{console.log("コメント読み込み開始:",h.video.id);const e=await(await fetch(`/api/videos/${h.video.id}/comments`)).json();console.log("コメントデータ受信:",e),v.value=e.comments||[],console.log("設定されたコメント配列:",v.value)}catch(a){console.error("コメントの読み込みに失敗しました:",a)}finally{E.value=!1}},se=async()=>{if(!(!m.value.trim()||A.value)){A.value=!0;try{const a=w();console.log("コメント投稿開始:",m.value);const e=await fetch(`/api/videos/${h.video.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a,Accept:"application/json"},body:JSON.stringify({content:m.value})});if(e.ok){const o=await e.json();console.log("投稿されたコメント:",o.comment),v.value.unshift(o.comment),console.log("更新後のコメント配列:",v.value),m.value="",D.value=!1}else{let o="コメントの投稿に失敗しました";try{const s=await e.json();o=s.error||s.message||o,console.error("コメント投稿エラー詳細:",s)}catch(s){console.error("エラーレスポンスのパースに失敗:",s)}alert(o)}}catch(a){console.error("コメント投稿エラー:",a),alert("コメントの投稿に失敗しました: "+a.message)}finally{A.value=!1}}},oe=async a=>{if(!(!g.value.trim()||S.value)){S.value=!0;try{const e=w(),o=await fetch(`/api/videos/${h.video.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Accept:"application/json"},body:JSON.stringify({content:g.value,parent_id:a})});if(o.ok){const s=await o.json(),l=v.value.find(c=>c.id===a);l&&(l.replies||(l.replies=[]),l.replies.push(s.comment)),g.value="",y.value=null}else{let s="返信の投稿に失敗しました";try{const l=await o.json();s=l.error||l.message||s,console.error("返信投稿エラー詳細:",l)}catch(l){console.error("エラーレスポンスのパースに失敗:",l)}alert(s)}}catch(e){console.error("返信投稿エラー:",e),alert("返信の投稿に失敗しました: "+e.message)}finally{S.value=!1}}},F=async a=>{if(confirm("このコメントを削除しますか？"))try{const e=w(),o=await fetch(`/api/videos/${h.video.id}/comments/${a.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":e,Accept:"application/json"}});if(o.ok)if(a.parent_id){const s=v.value.find(l=>l.id===a.parent_id);s&&s.replies&&(s.replies=s.replies.filter(l=>l.id!==a.id))}else v.value=v.value.filter(s=>s.id!==a.id);else{let s="コメントの削除に失敗しました";try{const l=await o.json();s=l.error||l.message||s}catch(l){console.error("エラーレスポンスのパースに失敗:",l)}alert(s)}}catch(e){console.error("コメント削除エラー:",e),alert("コメントの削除に失敗しました: "+e.message)}},ae=async a=>{try{const e=w(),o=await fetch(`/api/videos/${h.video.id}/comments/${a.id}/pin`,{method:"PATCH",headers:{"X-CSRF-TOKEN":e,Accept:"application/json"}});if(o.ok){const s=await o.json(),l=v.value.findIndex(c=>c.id===a.id);if(l!==-1&&(v.value[l].is_pinned=s.comment.is_pinned,s.comment.is_pinned)){const c=v.value.splice(l,1)[0];v.value.unshift(c)}}else{let s="ピン留めの変更に失敗しました";try{const l=await o.json();s=l.error||l.message||s}catch(l){console.error("エラーレスポンスのパースに失敗:",l)}alert(s)}}catch(e){console.error("ピン留めエラー:",e),alert("ピン留めの変更に失敗しました: "+e.message)}},le=a=>{y.value===a?(y.value=null,g.value=""):(y.value=a,g.value="")},re=()=>{m.value="",D.value=!1},ne=()=>{y.value=null,g.value=""},ie=a=>{var e;return h.video.user_id===parseInt((e=k.value)==null?void 0:e.id)&&!a.parent_id},H=a=>{const e=a.target;e.style.height="auto",e.style.height=`${Math.min(e.scrollHeight,100)}px`},ce=()=>{j.value=!0,_.value=!1},de=()=>{console.log("Video loaded successfully"),j.value=!1,_.value=!1},ue=async a=>{if(console.error("動画読み込みエラー:",a),R.value&&!T.value){console.log("プロキシでの読み込みに失敗。直接URLを試行します..."),T.value=!0,await be(),M.value&&M.value.load();return}if(_.value=!0,j.value=!1,a&&a.target&&a.target.error){const e=a.target.error;switch(console.error("動画読み込みエラー詳細:",e),e.code){case e.MEDIA_ERR_ABORTED:b.value="動画の読み込みが中断されました";break;case e.MEDIA_ERR_NETWORK:b.value="ネットワークエラーが発生しました";break;case e.MEDIA_ERR_DECODE:b.value="動画形式がサポートされていません";break;case e.MEDIA_ERR_SRC_NOT_SUPPORTED:b.value=R.value?"外部動画にアクセスできません":"動画形式がサポートされていません";break;default:b.value="動画を読み込めません"}}else b.value=R.value?"外部動画にアクセスできません":"動画を読み込めません"},ve=()=>{_.value=!1,j.value=!0,T.value=!1,M.value&&M.value.load()},I=a=>a>=1e4?`${(a/1e4).toFixed(1)}万`:a.toLocaleString(),U=a=>{const e=new Date,o=new Date(a),s=Math.floor((e-o)/(1e3*60*60));if(s<24)return`${s} 時間前`;const l=Math.floor(s/24);if(l<30)return`${l} 日前`;const c=Math.floor(l/30);return c<12?`${c} か月前`:`${Math.floor(c/12)} 年前`},P=async a=>{if(!k.value){alert("いいねするにはログインが必要です");return}try{const e=w(),o=await fetch(`/api/videos/${h.video.id}/comments/${a.id}/like`,{method:"POST",headers:{"X-CSRF-TOKEN":e,Accept:"application/json"}});if(o.ok){const s=await o.json(),l=(c,C)=>{for(let u=0;u<c.length;u++){if(c[u].id===C)return c[u].is_liked=s.is_liked,c[u].likes_count=s.likes_count,c[u].is_disliked=s.is_disliked,c[u].dislikes_count=s.dislikes_count,!0;if(c[u].replies&&c[u].replies.length>0&&l(c[u].replies,C))return!0}return!1};l(v.value,a.id)}else{let s="いいね処理に失敗しました";try{const l=await o.json();s=l.error||l.message||s}catch(l){console.error("エラーレスポンスのパースに失敗:",l)}alert(s)}}catch(e){console.error("いいねエラー:",e),alert("いいね処理に失敗しました: "+e.message)}},K=async a=>{if(!k.value){alert("きらいするにはログインが必要です");return}try{const e=w(),o=await fetch(`/api/videos/${h.video.id}/comments/${a.id}/dislike`,{method:"POST",headers:{"X-CSRF-TOKEN":e,Accept:"application/json"}});if(o.ok){const s=await o.json(),l=(c,C)=>{for(let u=0;u<c.length;u++){if(c[u].id===C)return c[u].is_liked=s.is_liked,c[u].likes_count=s.likes_count,c[u].is_disliked=s.is_disliked,c[u].dislikes_count=s.dislikes_count,!0;if(c[u].replies&&c[u].replies.length>0&&l(c[u].replies,C))return!0}return!1};l(v.value,a.id)}else{let s="きらい処理に失敗しました";try{const l=await o.json();s=l.error||l.message||s}catch(l){console.error("エラーレスポンスのパースに失敗:",l)}alert(s)}}catch(e){console.error("きらいエラー:",e),alert("きらい処理に失敗しました: "+e.message)}};return xe(()=>{te()}),(a,e)=>(n(),r("div",Ce,[B(_e,{onToggleSidebar:G,onSearch:Q}),t("div",Me,[L.value?d("",!0):(n(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:e[0]||(e[0]=o=>L.value=!0)})),B(ye,{isCollapsed:!0}),t("main",je,[t("div",Ee,[t("div",Ae,[t("div",Se,[t("video",{ref_key:"videoPlayer",ref:M,src:Y.value,class:"w-full h-full",controls:"",autoplay:"",crossorigin:"anonymous",onLoadedmetadata:de,onError:ue,onLoadstart:ce}," お使いのブラウザは動画の再生をサポートしていません。 ",40,$e),j.value&&!_.value?(n(),r("div",Te,e[4]||(e[4]=[t("svg",{class:"w-12 h-12 text-white animate-spin",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):d("",!0),_.value?(n(),r("div",Re,[e[5]||(e[5]=t("svg",{class:"w-16 h-16 mb-4",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})],-1)),t("span",De,i(b.value),1),t("button",{onClick:ve,class:"mt-4 px-4 py-2 bg-white text-black rounded hover:bg-gray-200 transition-colors"}," 再試行 ")])):d("",!0)]),t("h1",Ve,i(f.video.title),1),t("div",Le,[t("div",Be,[t("div",{class:p(["w-10 h-10 rounded-full flex-shrink-0",f.video.channelColor||"bg-gray-400"])},[f.video.channelAvatar?(n(),r("img",{key:0,src:f.video.channelAvatar,alt:f.video.channelName,class:"w-full h-full rounded-full object-cover"},null,8,ze)):(n(),r("div",Oe,i(f.video.channelInitial),1))],2),t("div",Ne,[t("h3",Fe,i(f.video.channelName),1),t("p",He,i(I(f.video.views))+" 回視聴 • "+i(U(f.video.publishedAt)),1)]),e[6]||(e[6]=t("button",{class:"ml-6 px-6 py-2 bg-black text-white rounded-full text-sm font-medium hover:bg-gray-800 transition-colors"}," チャンネル登録 ",-1))]),e[7]||(e[7]=fe('<div class="flex items-center space-x-2" data-v-c5a232d8><div class="flex items-center bg-gray-100 rounded-full overflow-hidden" data-v-c5a232d8><button class="flex items-center space-x-2 px-4 py-2 hover:bg-gray-200 transition-colors" data-v-c5a232d8><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c5a232d8><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" data-v-c5a232d8></path></svg><span class="text-sm font-medium" data-v-c5a232d8>高評価</span></button><div class="w-px h-6 bg-gray-300" data-v-c5a232d8></div><button class="px-4 py-2 hover:bg-gray-200 transition-colors" data-v-c5a232d8><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c5a232d8><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018c.163 0 .326.02.485.06L17 4m-7 10v2a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0-.714.211-1.412.608-2.006L17 13v-9m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5" data-v-c5a232d8></path></svg></button></div><button class="flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors" data-v-c5a232d8><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c5a232d8><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z" data-v-c5a232d8></path></svg><span class="text-sm font-medium" data-v-c5a232d8>共有</span></button><button class="flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors" data-v-c5a232d8><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c5a232d8><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m0 0V3a1 1 0 011 1v10.586A2 2 0 0116.586 16H7.414A2 2 0 016 14.586V4a1 1 0 011-1z" data-v-c5a232d8></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V9a1 1 0 00-1-1H8a1 1 0 00-1 1v1" data-v-c5a232d8></path></svg><span class="text-sm font-medium" data-v-c5a232d8>クリップ</span></button><button class="flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors" data-v-c5a232d8><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c5a232d8><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" data-v-c5a232d8></path></svg><span class="text-sm font-medium" data-v-c5a232d8>保存</span></button><button class="flex items-center justify-center w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors" data-v-c5a232d8><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-c5a232d8><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" data-v-c5a232d8></path></svg></button></div>',1))]),f.video.description?(n(),r("div",Ie,[t("div",Ue,[t("p",Pe,i(I(f.video.views))+" 回視聴 "+i(U(f.video.publishedAt)),1),t("div",Ke,[z(i(ee.value)+" ",1),f.video.description.length>150?(n(),r("button",{key:0,onClick:Z,class:"text-black font-medium ml-1 hover:underline"},i($.value?"簡潔に表示":"...さらに表示"),1)):d("",!0)])])])):d("",!0),t("div",Xe,[t("div",We,[t("h3",qe," コメント ("+i(v.value.length)+") ",1),e[8]||(e[8]=t("button",{class:"flex items-center space-x-1 text-sm text-gray-600 hover:text-black"},[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})]),t("span",null,"並び替え")],-1))]),k.value?(n(),r("div",Je,[t("div",Ye,i(k.value.name.charAt(0).toUpperCase()),1),t("div",Ge,[t("form",{onSubmit:X(se,["prevent"])},[W(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o),placeholder:"コメントを追加...",class:"w-full bg-transparent border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-sm py-2 min-h-[36px] max-h-[100px] resize-none",rows:"1",onFocus:e[2]||(e[2]=o=>D.value=!0),onInput:H},null,544),[[q,m.value]]),D.value?(n(),r("div",Qe,[t("button",{type:"button",onClick:re,class:"px-4 py-2 text-sm text-gray-600 hover:text-black"}," キャンセル "),t("button",{type:"submit",disabled:!m.value.trim()||A.value,class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},i(A.value?"投稿中...":"コメント"),9,Ze)])):d("",!0)],32)])])):d("",!0),E.value?(n(),r("div",et,e[9]||(e[9]=[t("svg",{class:"w-8 h-8 text-gray-400 animate-spin mx-auto",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("p",{class:"text-sm text-gray-500 mt-2"},"コメントを読み込み中...",-1)]))):!E.value&&v.value&&v.value.length>0?(n(),r("div",tt,[(n(!0),r(O,null,N(v.value,o=>(n(),r("div",{key:o.id,class:"comment-item"},[t("div",st,[t("div",{class:p(["w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-medium flex-shrink-0",o.is_deleted?"bg-gray-400":"bg-blue-500"])},i(o.user.channel_initial||o.user.name.charAt(0).toUpperCase()),3),t("div",ot,[t("div",at,[t("span",{class:p(["font-medium text-sm",o.is_deleted?"text-gray-500":"text-black"])},i(o.user.channel_name||o.user.name),3),o.is_pinned&&!o.is_deleted?(n(),r("span",lt," ピン留め ")):d("",!0),t("span",rt,i(o.time_ago),1)]),t("p",{class:p(["text-sm mb-2 whitespace-pre-wrap",o.is_deleted?"text-gray-500 italic":"text-gray-800"])},i(o.content),3),o.is_deleted?d("",!0):(n(),r("div",nt,[t("button",{onClick:s=>P(o),class:p(["flex items-center space-x-1 transition-colors",o.is_liked?"text-blue-600":"text-gray-600 hover:text-black"])},[e[10]||(e[10]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),o.likes_count>0?(n(),r("span",ct,i(o.likes_count),1)):d("",!0)],10,it),t("button",{onClick:s=>K(o),class:p(["flex items-center space-x-1 transition-colors",o.is_disliked?"text-red-600":"text-gray-600 hover:text-black"])},[e[11]||(e[11]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018c.163 0 .326.02.485.06L17 4m-7 10v2a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0-.714.211-1.412.608-2.006L17 13v-9m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})],-1)),o.dislikes_count>0?(n(),r("span",ut,i(o.dislikes_count),1)):d("",!0)],10,dt),k.value?(n(),r("button",{key:0,onClick:s=>le(o.id),class:"text-xs text-gray-600 hover:text-black font-medium"}," 返信 ",8,vt)):d("",!0),ie(o)?(n(),r("button",{key:1,onClick:s=>ae(o),class:"text-xs text-gray-600 hover:text-black font-medium"},i(o.is_pinned?"ピン留め解除":"ピン留め"),9,ht)):d("",!0),o.can_delete?(n(),r("button",{key:2,onClick:s=>F(o),class:"text-xs text-red-600 hover:text-red-800 font-medium"}," 削除 ",8,xt)):d("",!0)])),y.value===o.id?(n(),r("div",ft,[t("form",{onSubmit:X(s=>oe(o.id),["prevent"])},[t("div",gt,[t("div",mt,i(k.value.name.charAt(0).toUpperCase()),1),t("div",kt,[W(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>g.value=s),placeholder:`@${o.user.channel_name||o.user.name} に返信`,class:"w-full bg-transparent border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-sm py-2 min-h-[36px] max-h-[100px] resize-none",rows:"1",onInput:H},null,40,bt),[[q,g.value]]),t("div",_t,[t("button",{type:"button",onClick:ne,class:"px-4 py-2 text-sm text-gray-600 hover:text-black"}," キャンセル "),t("button",{type:"submit",disabled:!g.value.trim()||S.value,class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},i(S.value?"投稿中...":"返信"),9,yt)])])])],40,pt)])):d("",!0),o.replies&&o.replies.length>0?(n(),r("div",wt,[(n(!0),r(O,null,N(o.replies,s=>(n(),r("div",{key:s.id,class:"flex space-x-3"},[t("div",{class:p(["w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0",s.is_deleted?"bg-gray-400":"bg-green-500"])},i(s.user.channel_initial||s.user.name.charAt(0).toUpperCase()),3),t("div",Ct,[t("div",Mt,[t("span",{class:p(["font-medium text-sm",s.is_deleted?"text-gray-500":"text-black"])},i(s.user.channel_name||s.user.name),3),t("span",jt,i(s.time_ago),1)]),t("p",{class:p(["text-sm mb-2 whitespace-pre-wrap",s.is_deleted?"text-gray-500 italic":"text-gray-800"])},i(s.content),3),s.is_deleted?d("",!0):(n(),r("div",Et,[t("button",{onClick:l=>P(s),class:p(["flex items-center space-x-1 transition-colors",s.is_liked?"text-blue-600":"text-gray-600 hover:text-black"])},[e[12]||(e[12]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.60L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1)),s.likes_count>0?(n(),r("span",St,i(s.likes_count),1)):d("",!0)],10,At),t("button",{onClick:l=>K(s),class:p(["flex items-center space-x-1 transition-colors",s.is_disliked?"text-red-600":"text-gray-600 hover:text-black"])},[e[13]||(e[13]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018c.163 0 .326.02.485.60L17 4m-7 10v2a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0 .714.211-1.412.608-2.006L17 13v-9m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})],-1)),s.dislikes_count>0?(n(),r("span",Tt,i(s.dislikes_count),1)):d("",!0)],10,$t),s.can_delete?(n(),r("button",{key:0,onClick:l=>F(s),class:"text-xs text-red-600 hover:text-red-800 font-medium"}," 削除 ",8,Rt)):d("",!0)]))])]))),128))])):d("",!0)])])]))),128))])):!E.value&&(!v.value||v.value.length===0)?(n(),r("div",Dt,[e[16]||(e[16]=t("svg",{class:"mx-auto h-12 w-12 text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),e[17]||(e[17]=t("p",{class:"text-sm"},"まだコメントはありません",-1)),k.value?d("",!0):(n(),r("p",Vt,[B(ge(me),{href:"/login",class:"text-blue-600 hover:underline"},{default:pe(()=>e[14]||(e[14]=[z("ログイン")])),_:1,__:[14]}),e[15]||(e[15]=z("してコメントを投稿しましょう "))]))])):d("",!0)])]),t("div",Lt,[t("div",Bt,[e[20]||(e[20]=t("div",{class:"flex space-x-2 mb-4"},[t("button",{class:"px-3 py-1 bg-black text-white rounded-lg text-sm font-medium"}," すべて "),t("button",{class:"px-3 py-1 bg-gray-100 hover:bg-gray-200 text-black rounded-lg text-sm font-medium"}," このチャンネルから ")],-1)),e[21]||(e[21]=t("h3",{class:"font-semibold text-black mb-4"},"関連動画",-1)),t("div",zt,[(n(),r(O,null,N(8,o=>t("div",{key:o,class:"flex space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors"},[e[19]||(e[19]=t("div",{class:"w-40 h-24 bg-gray-200 rounded-lg flex-shrink-0 flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M8 5v14l11-7z"})])],-1)),t("div",Ot,[t("h4",Nt," 関連動画のタイトル "+i(o),1),e[18]||(e[18]=t("p",{class:"text-xs text-gray-600 mb-1"},"チャンネル名",-1)),t("p",Ft,i(Math.floor(Math.random()*1e3))+"万 回視聴 • "+i(Math.floor(Math.random()*30)+1)+"日前 ",1)])])),64))])])])])])])]))}},Kt=we(Ht,[["__scopeId","data-v-c5a232d8"]]);export{Kt as default};
